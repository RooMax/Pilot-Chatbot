<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Chatbot</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f4f4f4; }
        #chatBox { width: 100%; max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; height: 400px; overflow-y: auto; }
        .user { color: blue; }
        .bot { color: green; margin-bottom: 10px; }
        input, button { padding: 10px; font-size: 16px; }
        #inputArea { margin-top: 10px; display: flex; gap: 10px; justify-content: center; }
    </style>
</head>
<body>

<h2 style="text-align:center;">ðŸ¤– Talk to the AI Chatbot</h2>
<div id="chatBox"></div>

<div id="inputArea">
    <input type="text" id="userInput" placeholder="Type your message..." style="flex: 1;">
    <button onclick="sendMessage()">Send</button>
</div>

<script>
    async function sendMessage() {
      const input = document.getElementById('userInput');
      const message = input.value.trim();
      if (!message) return;

      const chatBox = document.getElementById('chatBox');
      chatBox.innerHTML += `<div class="user"><strong>You:</strong> ${message}</div>`;

      input.value = '';
      input.disabled = true;

      try {
        const response = await fetch('/api/chat', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ message })
        });
        const botReply = await response.text();
        chatBox.innerHTML += `<div class="bot"><strong>Bot:</strong> ${botReply}</div>`;
      } catch (err) {
        chatBox.innerHTML += `<div class="bot" style="color:red;"><strong>Bot:</strong> Error talking to backend.</div>`;
      }

      chatBox.scrollTop = chatBox.scrollHeight;
      input.disabled = false;
      input.focus();
    }

    document.getElementById("userInput").addEventListener("keypress", function (e) {
      if (e.key === "Enter") sendMessage();
    });
</script>

</body>
</html>
